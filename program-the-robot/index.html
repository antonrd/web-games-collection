<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Blockly Robot Simulator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

<!-- Load Blockly core (Using v10+) -->
<script src="https://unpkg.com/blockly@10/blockly_compressed.js"></script>
<script src="https://unpkg.com/blockly@10/blocks_compressed.js"></script>
<script src="https://unpkg.com/blockly@10/javascript_compressed.js"></script>
<script src="https://unpkg.com/blockly@10/msg/en.js"></script>

</head>
<body>

<a href="../index.html" class="back-link">‚Üê Back to Home</a>
<div class="game-wrapper">
    <div id="blocklyArea">
    <div id="blocklyDiv"></div>
    </div>

    <div id="simulationArea">
    <h3>Robot Simulation</h3>
    <canvas id="gridCanvas" width="400" height="400"></canvas>
    <div id="controls">
      <button id="playButton">Play</button>
      <button id="pauseButton" disabled>Pause</button>
      <button id="resetButton">Reset</button>
      <button id="newBoardButton">New Board</button>
    </div>
    <div id="messageArea">
      Welcome! Build a program to guide the robot from Start (green) to Goal (red). The gray cells are walls, and the blue cells are water. Use the blocks on the left to create your program. Click "Play" to start the simulation. You can pause or reset at any time. The board can be regenerated by clicking "New Board".
    </div>
    </div>
</div>

<xml id="toolbox" style="display: none">
  <category name="Movement" colour="230">
    <block type="robot_move_forward"></block>
    <block type="robot_swim_forward"></block>
    <block type="robot_turn_right"></block>
    <block type="robot_turn_left"></block>
  </category>
  <category name="Logic" colour="210">
    <block type="controls_if"></block>
    <block type="logic_compare"></block>
    <block type="logic_operation"></block>
    <block type="logic_negate"></block>
    <block type="logic_boolean"></block>
  </category>
  <category name="Loops" colour="120">
    <block type="controls_repeat_ext">
      <value name="TIMES">
        <shadow type="math_number">
          <field name="NUM">3</field>
        </shadow>
      </value>
    </block>
    <block type="controls_whileUntil">
        <field name="MODE">WHILE</field>
    </block>
  </category>
  <category name="Math" colour="230"> <!-- Often useful with variables -->
    <block type="math_number">
        <field name="NUM">0</field>
    </block>
    <block type="math_arithmetic">
      <value name="A">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="B">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="math_single">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">9</field>
        </shadow>
      </value>
    </block>
  </category>
  <category name="Variables" colour="330" custom="VARIABLE"></category> <!-- Standard Variables Category -->
  <category name="Functions" colour="290" custom="PROCEDURE"></category>
  <category name="Sensors" colour="160">
    <block type="robot_is_wall_ahead"></block>
    <block type="robot_is_water_ahead"></block>
    <block type="robot_is_on_goal"></block>
  </category>
</xml>

<!-- Load Blockly Robot Simulator -->
<script src="script.js"></script>

</body>
</html>
